/* -------------------------------------------------
   GLOBAL RESET
   ------------------------------------------------- */
*, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }

:root {
  --bg: #ffffff;
  --bg-sec: #f8f9fa;
  --bg-code: #f4f4f5;
  --text: #1a1a1a;
  --text-light: #666;
  --border: #e1e1e1;
  --primary: #4361ee;
  --primary-hov: #3a56d4;
  --scroll: #c1c1c1;
}
[data-theme="dark"] {
  --bg: #0d1117;
  --bg-sec: #161b22;
  --bg-code: #161b22;
  --text: #f0f0f0;
  --text-light: #8b949e;
  --border: #30363d;
  --primary: #58a6ff;
  --primary-hov: #1f6feb;
  --scroll: #30363d;
}

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text);
  transition: background .2s, color .2s;
}

/* -------------------------------------------------
   HEADER
   ------------------------------------------------- */
.header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 1rem 2rem; background: var(--bg-sec);
  border-bottom: 1px solid var(--border); position: sticky; top:0; z-index:100;
}
.logo { display:flex; align-items:center; gap:.5rem; font-size:1.5rem; font-weight:700; }
.header-actions { display:flex; gap:.75rem; }
.theme-btn, .mode-btn {
  background:transparent; border:none; color:var(--text-light);
  cursor:pointer; padding:.5rem; border-radius:6px;
  display:flex; align-items:center; gap:.4rem; font-weight:500;
  transition:all .2s;
}
.theme-btn:hover, .mode-btn:hover { background:rgba(100,100,100,.1); color:var(--text); }
.mode-btn.active { background:var(--primary); color:#fff; }
.mode-btn.active:hover { background:var(--primary-hov); }

/* -------------------------------------------------
   MAIN
   ------------------------------------------------- */
.main { max-width:1400px; margin:2rem auto; padding:0 1.5rem; }
.compare-card {
  background:var(--bg); border:1px solid var(--border);
  border-radius:12px; padding:1.5rem;
  box-shadow:0 4px 12px rgba(0,0,0,.05);
}

/* -------------------------------------------------
   INPUTS – FIXED: Text A & B boxes now large
   ------------------------------------------------- */
.inputs-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  grid-auto-rows: minmax(280px, auto);   /* ← Ensures minimum height */
}

.input-group {
  display: flex;
  flex-direction: column;
  height: 100%;                          /* ← Fill the grid cell */
}

.input-group label {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin-bottom: .5rem;
  font-weight: 600;
}

textarea {
  flex: 1;                               /* ← Grow to fill container */
  min-height: 260px;                     /* ← Comfortable default */
  padding: 1rem;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--bg-sec);
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: .95rem;
  resize: vertical;
  transition: border .2s;
}

textarea:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(67,97,238,.15);
}

/* -------------------------------------------------
   ACTION BAR
   ------------------------------------------------- */
.action-bar { display:flex; gap:1rem; justify-content:center; margin:1.5rem 0; }
.btn-primary,.btn-secondary,.btn-sm {
  display:flex; align-items:center; gap:.5rem;
  padding:.75rem 1.25rem; border:none; border-radius:8px;
  font-weight:500; cursor:pointer; transition:all .2s;
}
.btn-primary { background:var(--primary); color:#fff; }
.btn-primary:hover { background:var(--primary-hov); }
.btn-secondary { background:transparent; color:var(--text-light); border:1px solid var(--border); }
.btn-secondary:hover { background:var(--bg-sec); border-color:var(--text-light); }
.btn-sm { padding:.5rem .75rem; font-size:.875rem; }

/* -------------------------------------------------
   RESULTS – CRITICAL LAYOUT
   ------------------------------------------------- */
#results { display:flex; flex-direction:column; gap:1.5rem; margin-top:1.5rem; }
.diff-grid {
  display:flex; gap:0; align-items:stretch;
  min-height:400px; border:1px solid var(--border);
  border-radius:8px; overflow:hidden;
}
.diff-panel {
  flex:1; display:flex; flex-direction:column;
  min-width:0; background:var(--bg-sec);
}
.diff-panel h3 {
  padding:.75rem 1rem; margin:0;
  background:var(--bg); border-bottom:1px solid var(--border);
  font-size:1rem; font-weight:600;
}
.diff-content {
  flex:1; overflow:auto; padding:.75rem;
  font-family:'JetBrains Mono',monospace; line-height:1.5;
  background:var(--bg-code);
}
.diff-content::-webkit-scrollbar { width:8px; }
.diff-content::-webkit-scrollbar-thumb { background:var(--scroll); border-radius:4px; }

/* LINES */
.line {
  display:flex; align-items:flex-start; padding:.125rem 0;
}
.line .num {
  flex:0 0 3ch; text-align:right; user-select:none;
  opacity:.6; font-size:.8rem; padding-right:.75rem; color:var(--text-light);
}
.line .code { flex:1; white-space:pre-wrap; word-break:break-all; padding-right:1rem; }
.line.equal .code { color:var(--text-light); }
.line.deleted { background:rgba(230,57,70,.15); }
.line.inserted { background:rgba(42,157,143,.15); }
.line.modified { background:rgba(67,97,238,.15); }

/* MERGE ARROWS – appear only on changed lines */
.merge-arrows {
  flex:0 0 44px; display:flex; flex-direction:column;
  justify-content:center; align-items:center; gap:4px;
  opacity:0; transition:opacity .15s;
}
.line.changed .merge-arrows { opacity:1; }
.merge-btn {
  background:var(--primary); color:#fff; border:none;
  width:28px; height:28px; border-radius:50%; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:transform .15s,background .15s;
}
.merge-btn:hover { background:var(--primary-hov); transform:scale(1.12); }
.merge-btn i { width:16px; height:16px; }

/* OTHER RESULT ELEMENTS */
.stats { font-family:'JetBrains Mono',monospace; font-size:.9rem; color:var(--text-light); text-align:center; }
.change-summary { background:var(--bg-sec); padding:.75rem; border-radius:6px; font-size:.9rem; border-left:4px solid var(--primary); }
.merge-controls { display:flex; justify-content:center; gap:1rem; }
.export-bar { display:flex; flex-wrap:wrap; gap:.75rem; justify-content:center; }
.footer { text-align:center; padding:2rem; color:var(--text-light); font-size:.9rem; }
.icon-heart { color:#e63946; width:16px; height:16px; display:inline-block; }

.hidden { display:none !important; }

/* -------------------------------------------------
   RESPONSIVE
   ------------------------------------------------- */
@media (max-width:768px) {
  .inputs-grid { grid-template-columns:1fr; }
  .header { padding:1rem; flex-wrap:wrap; }
  .header-actions { width:100%; justify-content:center; margin-top:.5rem; }
}
@media (max-width:600px) {
  .diff-grid { flex-direction:column; }
  .merge-arrows { flex-direction:row; width:100%; justify-content:center; padding:.25rem 0; }
}
